# Массовая загрузка вопросов

Этот набор скриптов позволяет загружать большое количество вопросов (120+) в базу данных без использования веб-интерфейса.

## Варианты загрузки

### 1. CSV файл (рекомендуется для Excel)

**Самый простой способ для большого количества вопросов.**

#### Подготовка данных:
1. Создайте Excel файл с колонками:
   - `category` - категория вопроса (например, "Биология", "Химия")
   - `text` - текст вопроса
       - `options` - варианты ответов через точку с запятой (;)
   - `correct_answer` - правильный ответ
   - `image_url` - URL изображения (опционально)
   - `table_data` - данные таблицы (опционально)

2. Конвертируйте Excel в CSV:
```bash
python excel_to_csv_converter.py --create-sample  # создает пример
python excel_to_csv_converter.py questions.xlsx questions.csv
```

3. Загрузите вопросы:
```bash
python bulk_upload_questions.py questions.csv "Название теста"
```

### 2. JSON файл (для программистов)

**Более структурированный подход.**

#### Подготовка данных:
1. Создайте JSON файл:
```json
{
  "test_title": "Название теста",
  "questions": [
    {
      "category": "Биология",
      "text": "Какая органелла отвечает за синтез белка?",
      "options": ["Рибосома", "Митохондрия", "Ядро", "Лизосома", "Эндоплазматическая сеть"],
      "correct_answer": "Рибосома",
      "image_url": "",
      "table_data": null
    }
  ]
}
```

2. Загрузите вопросы:
```bash
python bulk_upload_json.py --create-sample  # создает пример
python bulk_upload_json.py questions.json "Название теста"
```

## Примеры использования

### Создание примеров файлов:
```bash
# CSV пример
python bulk_upload_questions.py --create-sample

# JSON пример  
python bulk_upload_json.py --create-sample

# Excel пример
python excel_to_csv_converter.py --create-sample
```

### Загрузка вопросов:
```bash
# Из CSV
python bulk_upload_questions.py questions.csv "Биология - Тест 1" 1

# Из JSON
python bulk_upload_json.py questions.json "Химия - Тест 1" 1
```

## Структура данных

### Обязательные поля:
- `category` - категория вопроса
- `text` - текст вопроса  
- `options` - массив вариантов ответов
- `correct_answer` - правильный ответ

### Опциональные поля:
- `image_url` - URL изображения к вопросу
- `table_data` - данные таблицы в JSON формате

## Поддерживаемые форматы

### CSV:
```csv
category,text,options,correct_answer,image_url,table_data
"Биология","Вопрос 1","['A', 'B', 'C', 'D', 'E']","A","",""
```

### JSON:
```json
{
  "category": "Биология",
  "text": "Вопрос 1", 
  "options": ["A", "B", "C", "D", "E"],
  "correct_answer": "A",
  "image_url": "",
  "table_data": null
}
```

### Excel:
Создайте Excel файл с колонками: category, text, options, correct_answer, image_url, table_data
**Примечание:** В колонке options используйте точку с запятой (;) для разделения вариантов ответов

## Советы для больших объемов данных

1. **Разделите на части**: Если у вас 120+ вопросов, разделите их на несколько файлов по 20-30 вопросов
2. **Проверьте данные**: Сначала загрузите несколько вопросов для проверки формата
3. **Резервное копирование**: Сделайте резервную копию базы данных перед массовой загрузкой
4. **Логирование**: Скрипты показывают прогресс загрузки и ошибки

## Устранение неполадок

### Ошибка "Файл не найден":
- Убедитесь, что файл находится в правильной директории
- Проверьте правильность имени файла

### Ошибка "Отсутствуют обязательные колонки":
- Проверьте названия колонок в файле
- Убедитесь, что все обязательные поля присутствуют

### Ошибка "Ошибка в строке X":
- Проверьте формат данных в указанной строке
- Убедитесь, что JSON правильно отформатирован

## Дополнительные возможности

### Создание нескольких тестов:
```bash
python bulk_upload_questions.py biology_questions.csv "Биология - Тест 1" 1
python bulk_upload_questions.py chemistry_questions.csv "Химия - Тест 1" 1
```

### Загрузка с изображениями:
Добавьте URL изображений в колонку `image_url` или поле `image_url` в JSON.

### Загрузка с таблицами:
Используйте поле `table_data` для вопросов с табличными данными в JSON формате. 